# üõ†Ô∏è Gu√≠a Completa de Configuraci√≥n del Entorno - Crypto Analysis Suite

## üìã **Requisitos del Sistema**

### **Versiones Obligatorias (CR√çTICO):**
- **Node.js:** ‚â• 18.0.0 (Recomendado: 18.19.0 LTS)
- **npm:** ‚â• 8.0.0 (Recomendado: 10.2.3)
- **Sistema Operativo:** macOS, Linux, Windows 10+

### **Verificaci√≥n del Sistema:**
```bash
# Verificar versiones actuales
node --version    # Debe mostrar v18.x.x o superior
npm --version     # Debe mostrar 8.x.x o superior

# Si las versiones son incorrectas:
# macOS (usando Homebrew):
brew install node@18

# Linux (usando nvm):
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18.19.0
nvm use 18.19.0

# Windows (descargar desde nodejs.org):
# https://nodejs.org/dist/v18.19.0/node-v18.19.0-x64.msi
```

---

## üèóÔ∏è **Configuraci√≥n del Proyecto (Paso a Paso)**

### **Paso 1: Preparaci√≥n del Directorio**
```bash
# Navegar al directorio de trabajo
cd /Users/andres.dex/Downloads

# Crear directorio del proyecto
mkdir crypto-analysis-suite-production
cd crypto-analysis-suite-production

# Verificar ubicaci√≥n
pwd  # Debe mostrar: /Users/andres.dex/Downloads/crypto-analysis-suite-production
```

### **Paso 2: Inicializaci√≥n del Proyecto**
```bash
# Inicializar proyecto Vite con React + TypeScript
npm create vite@latest . -- --template react-ts

# Verificar que se crearon los archivos base
ls -la
# Debe mostrar: package.json, src/, public/, index.html, etc.

# Instalaci√≥n inicial de dependencias base
npm install
```

### **Paso 3: Instalaci√≥n de Dependencias Espec√≠ficas**
```bash
# IMPORTANTE: Ejecutar estos comandos UNO POR UNO para evitar conflictos

# 1. React Query para gesti√≥n de estado del servidor
npm install @tanstack/react-query@^5.17.9

# 2. Google Generative AI para an√°lisis IA
npm install @google/generative-ai@^0.21.0

# 3. Librer√≠as de visualizaci√≥n y datos
npm install d3@^7.8.5
npm install papaparse@^5.4.1

# 4. Gesti√≥n de estado global
npm install zustand@^4.4.7

# 5. Renderizado de Markdown
npm install react-markdown@^9.0.1

# 6. Iconos (opcional pero recomendado)
npm install lucide-react@^0.263.1

# 7. TailwindCSS para estilos
npm install -D tailwindcss@^3.4.0 postcss autoprefixer

# 8. Tipos de TypeScript
npm install -D @types/d3@^7.4.3
npm install -D @types/papaparse@^5.3.14

# Verificar instalaci√≥n
npm ls --depth=0
```

### **Paso 4: Configuraci√≥n de TailwindCSS**
```bash
# Inicializar TailwindCSS
npx tailwindcss init -p

# El comando anterior debe crear:
# - tailwind.config.js
# - postcss.config.js
```

**Editar `tailwind.config.js`:**
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        'crypto-green': 'rgb(34, 139, 34)',
        'crypto-red': 'rgb(180, 0, 0)',
        'crypto-neutral': 'rgb(255, 255, 100)',
      }
    },
  },
  plugins: [],
}
```

**Actualizar `src/index.css`:**
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Estilos base para la aplicaci√≥n */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #1f2937;
  color: #f9fafb;
}

#root {
  min-height: 100vh;
}
```

---

## üìÅ **Estructura de Directorios**

### **Crear estructura completa:**
```bash
# Crear directorios necesarios
mkdir -p src/{components,services,utils,types,hooks,styles}
mkdir -p public/data

# Verificar estructura
tree src/
# Debe mostrar:
# src/
# ‚îú‚îÄ‚îÄ components/
# ‚îú‚îÄ‚îÄ services/
# ‚îú‚îÄ‚îÄ utils/
# ‚îú‚îÄ‚îÄ types/
# ‚îú‚îÄ‚îÄ hooks/
# ‚îî‚îÄ‚îÄ styles/
```

### **Estructura final esperada:**
```
crypto-analysis-suite-production/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crypto_coins_category.csv    # CSV de categor√≠as
‚îÇ   ‚îî‚îÄ‚îÄ vite.svg
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HeatmapDisplay.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClassicHeatmapDisplay.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SectorHeatmapView.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatisticsView.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CSVFileHandler.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...otros componentes
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geminiService.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ csvCategoriesService.ts
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.css
‚îú‚îÄ‚îÄ .env                                 # Variables de entorno
‚îú‚îÄ‚îÄ .env.example                         # Ejemplo de variables
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ vite.config.ts
```

---

## üîê **Configuraci√≥n de Variables de Entorno**

### **Crear archivo `.env`:**
```bash
# Crear archivo de variables de entorno
cat > .env << EOF
# API Keys
VITE_GEMINI_API_KEY=your_gemini_api_key_here
VITE_COINGECKO_API_KEY=your_coingecko_api_key_here

# Configuraci√≥n de la aplicaci√≥n
VITE_APP_NAME="Crypto Analysis Suite"
VITE_APP_VERSION="2.0.0"

# URLs de APIs
VITE_COINGECKO_BASE_URL="https://api.coingecko.com/api/v3"
VITE_GEMINI_MODEL="gemini-pro"

# Configuraci√≥n de desarrollo
VITE_DEV_MODE=true
VITE_DEBUG_MODE=false
EOF
```

### **Crear archivo `.env.example`:**
```bash
# Crear ejemplo de variables de entorno
cat > .env.example << EOF
# API Keys (reemplazar con valores reales)
VITE_GEMINI_API_KEY=your_gemini_api_key_here
VITE_COINGECKO_API_KEY=your_coingecko_api_key_here

# Configuraci√≥n de la aplicaci√≥n
VITE_APP_NAME="Crypto Analysis Suite"
VITE_APP_VERSION="2.0.0"

# URLs de APIs
VITE_COINGECKO_BASE_URL="https://api.coingecko.com/api/v3"
VITE_GEMINI_MODEL="gemini-pro"

# Configuraci√≥n de desarrollo
VITE_DEV_MODE=true
VITE_DEBUG_MODE=false
EOF
```

### **Actualizar `.gitignore`:**
```bash
# A√±adir .env al gitignore
echo "" >> .gitignore
echo "# Environment variables" >> .gitignore
echo ".env" >> .gitignore
echo ".env.local" >> .gitignore
echo ".env.production" >> .gitignore
```

---

## üì¶ **Verificaci√≥n de Dependencias**

### **Comando de verificaci√≥n completa:**
```bash
# Verificar todas las dependencias instaladas
npm ls --depth=1

# Verificar versiones espec√≠ficas cr√≠ticas
npm list @tanstack/react-query
npm list @google/generative-ai
npm list d3
npm list papaparse
npm list tailwindcss

# El output debe mostrar las versiones exactas especificadas
```

### **Resoluci√≥n de conflictos de dependencias:**
```bash
# Si hay conflictos, limpiar e instalar desde cero
rm -rf node_modules package-lock.json
npm install

# Si persisten errores:
npm audit fix
npm update

# Verificar integridad
npm doctor
```

---

## üöÄ **Configuraci√≥n de React Query**

### **Actualizar `src/main.tsx`:**
```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'
import App from './App.tsx'
import './index.css'

// Configuraci√≥n del QueryClient
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 60000,           // 1 minuto
      refetchInterval: 60000,     // Refetch cada minuto
      retry: 3,                   // 3 reintentos en caso de error
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
    },
    mutations: {
      retry: 1,
    },
  },
})

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <App />
      {import.meta.env.DEV && <ReactQueryDevtools initialIsOpen={false} />}
    </QueryClientProvider>
  </React.StrictMode>,
)
```

---

## üîç **Verificaci√≥n Final del Entorno**

### **Lista de verificaci√≥n completa:**

#### **1. Versiones del sistema:**
```bash
node --version   # ‚â• v18.0.0 ‚úÖ
npm --version    # ‚â• 8.0.0 ‚úÖ
```

#### **2. Estructura de archivos:**
```bash
ls -la           # package.json, src/, public/ ‚úÖ
ls -la src/      # components/, services/, utils/ ‚úÖ
ls -la public/   # crypto_coins_category.csv ‚úÖ
```

#### **3. Dependencias cr√≠ticas:**
```bash
npm list @tanstack/react-query   # ^5.17.9 ‚úÖ
npm list @google/generative-ai   # ^0.21.0 ‚úÖ
npm list d3                      # ^7.8.5 ‚úÖ
npm list tailwindcss             # ^3.4.0 ‚úÖ
```

#### **4. Configuraci√≥n:**
```bash
cat .env                         # Variables configuradas ‚úÖ
cat tailwind.config.js           # TailwindCSS configurado ‚úÖ
```

#### **5. Test de compilaci√≥n:**
```bash
npm run type-check               # Sin errores TypeScript ‚úÖ
npm run build                    # Compilaci√≥n exitosa ‚úÖ
```

### **Comando de inicio:**
```bash
# Iniciar servidor de desarrollo
npm run dev

# Debe mostrar:
# ‚ûú  Local:   http://localhost:5173/
# ‚ûú  Network: http://[tu-ip]:5173/
```

---

## üÜò **Troubleshooting Com√∫n**

### **Error: "Module not found"**
```bash
# Limpiar cach√© de npm
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### **Error: "TypeScript compilation failed"**
```bash
# Verificar configuraci√≥n de TypeScript
cat tsconfig.json
# Reinstalar tipos
npm install -D @types/react @types/react-dom
```

### **Error: "TailwindCSS not working"**
```bash
# Verificar configuraci√≥n
cat tailwind.config.js
cat postcss.config.js
# Regenerar configuraci√≥n
rm tailwind.config.js postcss.config.js
npx tailwindcss init -p
```

### **Error: "Environment variables not loading"**
```bash
# Verificar archivo .env
cat .env
# Verificar que las variables empiecen con VITE_
# Reiniciar servidor de desarrollo
```

---

## ‚úÖ **Entorno Listo**

**Una vez completados todos los pasos, el entorno estar√° listo para:**

1. ‚úÖ **Desarrollo local** con hot-reload
2. ‚úÖ **Integraci√≥n CSV** con categor√≠as reales
3. ‚úÖ **An√°lisis IA** con Google Gemini
4. ‚úÖ **Visualizaciones** con D3.js
5. ‚úÖ **Gesti√≥n de estado** con React Query
6. ‚úÖ **Estilos modernos** con TailwindCSS
7. ‚úÖ **TypeScript** completamente configurado

**¬°El proyecto est√° listo para recibir los archivos de migraci√≥n y comenzar el desarrollo!**