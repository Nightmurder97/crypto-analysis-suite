# üöÄ AI Coding Assistant - Crypto Analysis Suite Migration

## üìã **PROMPT PRINCIPAL**

Eres un **AI Coding Assistant** especializado en React/TypeScript que debe migrar completamente una aplicaci√≥n de an√°lisis de criptomonedas. Tu objetivo es implementar **TODAS** las mejoras identificadas usando los archivos proporcionados como referencia.

### **CONTEXTO DEL PROYECTO:**
- **Proyecto:** Crypto Analysis Suite - Aplicaci√≥n React para an√°lisis profesional de criptomonedas
- **Problemas actuales:** Heatmaps paginados (50 elementos), sin gradientes, layout con datos sobrepuestos, an√°lisis IA b√°sico, p√°ginas est√°ticas
- **Objetivo:** Transformar en aplicaci√≥n nivel profesional con 1000 elementos sin paginaci√≥n, gradientes como im√°genes profesionales, integraci√≥n CSV categor√≠as reales

### **ARCHIVOS DE REFERENCIA DISPONIBLES:**
```
/Users/andres.dex/Downloads/crypto-analysis-suite/Claude.Desktop.Instructions/
‚îú‚îÄ‚îÄ csv_integration_service.ts          # Servicio integraci√≥n CSV categor√≠as
‚îú‚îÄ‚îÄ heatmap_gradients_exact.tsx         # Heatmaps con gradientes exactos
‚îú‚îÄ‚îÄ classic_heatmap_exact_gradients.tsx # Heatmap cl√°sico con gradientes
‚îú‚îÄ‚îÄ sector_heatmap_csv_integration.tsx  # An√°lisis sectorial con CSV
‚îú‚îÄ‚îÄ estadisticas_dinamicas.tsx          # Estad√≠sticas din√°micas
‚îú‚îÄ‚îÄ analisis_ia_mejorado.ts            # Servicio IA mejorado
‚îú‚îÄ‚îÄ layout_fix_resumen.tsx             # Layout mejorado
‚îú‚îÄ‚îÄ types_updated.ts                   # Tipos TypeScript completos
‚îú‚îÄ‚îÄ csv_file_handler.tsx               # Componente carga CSV
‚îî‚îÄ‚îÄ migration_guide.md                 # Gu√≠a de migraci√≥n
```

---

## üéØ **TAREAS PRINCIPALES (EJECUTAR EN ORDEN)**

### **FASE 1: Configuraci√≥n del Entorno (CR√çTICO)**
```bash
# 1. Crear directorio del proyecto limpio
mkdir -p crypto-analysis-suite-new
cd crypto-analysis-suite-new

# 2. Inicializar proyecto React moderno
npm create vite@latest . -- --template react-ts
npm install

# 3. Instalar dependencias exactas requeridas
npm install @tanstack/react-query@^5.17.9
npm install @google/generative-ai@^0.21.0
npm install d3@^7.8.5
npm install papaparse@^5.4.1
npm install zustand@^4.4.7
npm install react-markdown@^9.0.1
npm install @types/d3@^7.4.3
npm install @types/papaparse@^5.3.14

# 4. Configurar TailwindCSS
npm install -D tailwindcss@^3.4.0 postcss autoprefixer
npx tailwindcss init -p
```

### **FASE 2: Estructura de Archivos**
```bash
# Crear estructura completa
mkdir -p src/{components,services,utils,types}
mkdir -p public

# Copiar archivo CSV de categor√≠as
cp crypto_coins_category.csv public/
```

### **FASE 3: Implementaci√≥n de Archivos (USAR ARCHIVOS DE REFERENCIA)**

#### 3.1 Reemplazar/Crear archivos principales:

1. **`src/types.ts`** - Copiar de `types_updated.ts`
2. **`src/utils/csvCategoriesService.ts`** - Copiar de `csv_integration_service.ts`
3. **`src/components/HeatmapDisplay.tsx`** - Copiar de `heatmap_gradients_exact.tsx`
4. **`src/components/ClassicHeatmapDisplay.tsx`** - Copiar de `classic_heatmap_exact_gradients.tsx`
5. **`src/components/SectorHeatmapView.tsx`** - Copiar de `sector_heatmap_csv_integration.tsx`
6. **`src/components/StatisticsView.tsx`** - Copiar de `estadisticas_dinamicas.tsx`
7. **`src/services/geminiService.ts`** - Copiar de `analisis_ia_mejorado.ts`
8. **`src/components/CSVFileHandler.tsx`** - Copiar de `csv_file_handler.tsx`

#### 3.2 Actualizar App.tsx con cambios cr√≠ticos:

**CAMBIO OBLIGATORIO EN CONSTANTES:**
```typescript
// ANTES (INCORRECTO):
const HEATMAP_ITEMS_PER_PAGE = 50;
const CLASSIC_HEATMAP_ITEMS_PER_PAGE = 100;

// DESPU√âS (CORRECTO):
const HEATMAP_ITEMS_PER_PAGE = 1000;  // ‚úÖ MOSTRAR TODOS
const CLASSIC_HEATMAP_ITEMS_PER_PAGE = 1000;  // ‚úÖ MOSTRAR TODOS
```

#### 3.3 Configurar TailwindCSS:
```javascript
// tailwind.config.js
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

### **FASE 4: Configuraci√≥n React Query y Estado**

#### 4.1 Actualizar src/main.tsx:
```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import App from './App.tsx'
import './index.css'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 60000, // 1 minuto
      refetchInterval: 60000, // Refetch cada minuto
    },
  },
})

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <App />
    </QueryClientProvider>
  </React.StrictMode>,
)
```

### **FASE 5: Validaci√≥n y Testing**

#### 5.1 Checklist de funcionamiento:
- [ ] **Heatmaps muestran 1000 elementos sin paginaci√≥n**
- [ ] **Gradientes exactos como las im√°genes (verde‚Üíamarillo‚Üírojo)**
- [ ] **CSV se carga correctamente desde public/crypto_coins_category.csv**
- [ ] **An√°lisis sectorial usa categor√≠as reales del CSV**
- [ ] **Layout de ancho completo sin datos sobrepuestos**
- [ ] **An√°lisis IA genera reportes estructurados en espa√±ol**
- [ ] **Estad√≠sticas se calculan din√°micamente**

#### 5.2 Comandos de verificaci√≥n:
```bash
# Verificar estructura
ls -la src/components/
ls -la src/services/
ls -la src/utils/
ls -la public/crypto_coins_category.csv

# Iniciar desarrollo
npm run dev

# Verificar consola del navegador:
# ‚úÖ "Cargadas XXX categor√≠as de criptomonedas del CSV"
# ‚úÖ "XXX criptomonedas enriquecidas con categor√≠as"
```

---

## ‚ö° **INSTRUCCIONES ESPEC√çFICAS**

### **CR√çTICO - Variables de Entorno:**
```bash
# Crear .env en la ra√≠z
echo "VITE_GEMINI_API_KEY=tu_clave_aqui" > .env
echo ".env" >> .gitignore
```

### **CR√çTICO - Dependencias Exactas:**
Tu `package.json` debe incluir exactamente:
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "@tanstack/react-query": "^5.17.9",
    "@google/generative-ai": "^0.21.0",
    "d3": "^7.8.5",
    "papaparse": "^5.4.1",
    "zustand": "^4.4.7",
    "react-markdown": "^9.0.1"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@types/d3": "^7.4.3",
    "@types/papaparse": "^5.3.14",
    "tailwindcss": "^3.4.0",
    "typescript": "^5.2.2",
    "vite": "^5.0.8"
  }
}
```

### **CR√çTICO - Gradientes Exactos:**
Los heatmaps DEBEN usar estos colores RGB exactos:
- **+20% o m√°s:** `rgb(34, 139, 34)` (verde intenso)
- **+10% a +20%:** `rgb(50, 180, 50)` (verde medio)
- **0% a +10%:** `rgb(100, 200, 100)` (verde claro)
- **Neutral:** `rgb(255, 255, 100)` (amarillo)
- **-2% a -10%:** `rgb(255, 200, 0)` (naranja claro)
- **-10% a -20%:** `rgb(255, 140, 0)` (naranja)
- **-20% o m√°s:** `rgb(180, 0, 0)` (rojo intenso)

---

## üìä **RESULTADO ESPERADO**

Al completar la migraci√≥n, la aplicaci√≥n debe:

1. **Mostrar 1000 criptomonedas** en heatmaps sin paginaci√≥n
2. **Gradientes id√©nticos** a las im√°genes profesionales proporcionadas
3. **An√°lisis sectorial preciso** usando categor√≠as reales del CSV
4. **Layout fluido** de ancho completo sin sobreposiciones
5. **An√°lisis IA estructurado** en espa√±ol con reportes de 1500+ palabras
6. **Estad√≠sticas din√°micas** que se actualizan con datos reales
7. **Performance optimizada** para manejar 1000 elementos simult√°neamente

---

## üîß **TROUBLESHOOTING**

### Si los heatmaps siguen paginados:
```bash
grep -r "HEATMAP_ITEMS_PER_PAGE.*50" src/
# Debe devolver 0 resultados - si encuentra algo, cambiar a 1000
```

### Si el CSV no se carga:
```bash
# Verificar archivo en public/
ls -la public/crypto_coins_category.csv
# Verificar en DevTools: Network tab, buscar crypto_coins_category.csv
```

### Si los gradientes no coinciden:
```bash
# Verificar que uses exactamente los c√≥digos RGB especificados
grep -r "rgb(" src/components/HeatmapDisplay.tsx
```

---

## üìù **ENTREGABLES**

1. **Aplicaci√≥n funcionando** con `npm run dev`
2. **C√≥digo limpio** siguiendo las mejores pr√°cticas de React/TypeScript
3. **Documentaci√≥n** de cambios implementados
4. **Testing** b√°sico de todas las funcionalidades
5. **Pull Request** listo para review

**¬°Ejecuta todas las fases en orden y verifica cada paso antes de continuar!**